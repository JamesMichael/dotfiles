# vi:ft=zsh

# Paths ------------------------------------------------------------------------

export PATH="$HOME/.local/bin:$PATH"

# Completion -------------------------------------------------------------------

autoload -U compinit
compinit

# allow tab completion in the middle of a word
setopt COMPLETE_IN_WORD

# allow cursors to select completion
zstyle ':completion:*' menu select

# Complete aliases as well as commands
setopt COMPLETE_ALIASES

# History ----------------------------------------------------------------------

setopt SHARE_HISTORY
setopt HIST_IGNORE_DUPS
setopt HIST_VERIFY

export HISTFILE="$HOME/.zsh_history"
export HISTSIZE=100000000
export SAVEHIST=$HISTSIZE

# Fix annoyances ---------------------------------------------------------------

setopt NO_BEEP

# turn off flow control
stty -ixon -ixoff

# prevent external programs changing tty settings
ttyctl -f

# Search -----------------------------------------------------------------------

# Search history using arrow keys
autoload -Uz up-line-or-beginning-search
autoload -Uz down-line-or-beginning-search

zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search

bindkey "^[[A" up-line-or-beginning-search
bindkey "^[[B" down-line-or-beginning-search

# Control-R backwards search
bindkey "^R" history-incremental-search-backward

# Key bindings -----------------------------------------------------------------

bindkey -e

# Custom Prompt ----------------------------------------------------------------

# basename(dirname) $
PROMPT="%F{magenta}%1~%f %{$%G%} "

# Locale ----------------------------------------------------------------------

export LC_ALL=en_GB.UTF-8

# Misc -------------------------------------------------------------------------

# Show elapsed time + CPU stats for long running processes
# Counts execution time /not/ wall clock
REPORTTIME=10
